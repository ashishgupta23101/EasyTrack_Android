{"version":3,"sources":["webpack:///./src/app/pages/history/history.module.ts","webpack:///./src/app/pages/history/history.page.html","webpack:///./src/app/pages/history/history.page.scss","webpack:///./src/app/pages/history/history.page.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;AAAyC;AACM;AACF;AACU;AAEV;AAEA;AACU;AAEvD,IAAM,MAAM,GAAW;IACrB;QACE,IAAI,EAAE,EAAE;QACR,SAAS,EAAE,yDAAW;KACvB;CACF,CAAC;AAWF;IAAA;IAAgC,CAAC;IAApB,iBAAiB;QAT7B,8DAAQ,CAAC;YACR,OAAO,EAAE;gBACP,4DAAY;gBACZ,0DAAW;gBACX,0DAAW,EAAC,kEAAY;gBACxB,4DAAY,CAAC,QAAQ,CAAC,MAAM,CAAC;aAC9B;YACD,YAAY,EAAE,CAAC,yDAAW,CAAC;SAC5B,CAAC;OACW,iBAAiB,CAAG;IAAD,wBAAC;CAAA;AAAH;;;;;;;;;;;;AC1B9B,m/BAAm/B,oBAAoB,qVAAqV,oBAAoB,4wBAA4wB,kBAAkB,KAAK,iBAAiB,gDAAgD,aAAa,iCAAiC,YAAY,IAAI,gJAAgJ,6pB;;;;;;;;;;;ACAl6E,iCAAiC,mCAAmC,EAAE,cAAc,gCAAgC,EAAE,sBAAsB,mCAAmC,iBAAiB,gCAAgC,mCAAmC,iCAAiC,kCAAkC,EAAE,iBAAiB,wBAAwB,EAAE,wBAAwB,4BAA4B,EAAE,kCAAkC,yBAAyB,mBAAmB,qBAAqB,mBAAmB,EAAE,OAAO,8BAA8B,EAAE,gBAAgB,mBAAmB,wBAAwB,oBAAoB,EAAE,cAAc,6BAA6B,gCAAgC,EAAE,sBAAsB,6BAA6B,mCAAmC,EAAE,8BAA8B,2BAA2B,sBAAsB,qBAAqB,mBAAmB,EAAE,kBAAkB,6BAA6B,EAAE,+CAA+C,++D;;;;;;;;;;;;;;;;;;;;;;;;ACAr+B;AACT;AACI;AACsC;AACnB;AACa;AACZ;AACR;AAOzD;IAQA,4CAA4C;IAC1C,qBAAoB,YAA6B,EAAW,OAAsB,EAAQ,eAAgC,EAAU,OAAsB,EAAW,OAAgB;QAAjK,iBAAY,GAAZ,YAAY,CAAiB;QAAW,YAAO,GAAP,OAAO,CAAe;QAAQ,oBAAe,GAAf,eAAe,CAAiB;QAAU,YAAO,GAAP,OAAO,CAAe;QAAW,YAAO,GAAP,OAAO,CAAS;QAR9K,eAAU,GAAG,EAAE,CAAC;QAChB,eAAU,GAAG,cAAc,CAAC;QAC5B,iBAAY,GAAQ,kEAAU,CAAC,IAAI,IAAI,EAAE,EAAE,YAAY,EAAE,IAAI,CAAC,CAAC;QAC/D,WAAM,GAAG,GAAG,CAAC;QACb,iBAAY,GAA0B,EAAE,CAAC;QAChD,gBAAW,GAAG,KAAK,CAAC;IAGoK,CAAC;IAEzL,8BAAQ,GAAR;IACA,CAAC;IACD,sCAAgB,GAAhB;QACE,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,oBAAoB,CAAC,CAAC;QAC3C,IAAI,CAAC,YAAY,EAAE,CAAC;IACtB,CAAC;IACD,sCAAgB,GAAhB;QACE,IAAI,IAAI,CAAC,UAAU,KAAK,EAAE,IAAI,IAAI,CAAC,UAAU,KAAK,SAAS,IAAI,IAAI,CAAC,UAAU,KAAK,IAAI,EAAC;YACtF,IAAI,CAAC,WAAW,EAAE,CAAC;SACpB;aAAM;YACP,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC,YAAY,CAAC,WAAW,CAAC,IAAI,CAAC,YAAY,EAAG,IAAI,CAAC,UAAU,CAAC,CAAC;SACtF;IACH,CAAC;IACD,kCAAY,GAAZ;QAAA,iBAUD;QATG,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,kBAAkB,CAAC,CAAC,IAAI,CAAC,UAAC,KAAK;YAC9C,IAAI,KAAK,KAAK,EAAE,IAAI,KAAK,KAAK,SAAS,IAAI,KAAK,KAAK,IAAI,EAAC;gBAC1D,KAAI,CAAC,YAAY,CAAC,2BAA2B,CAAC,KAAK,CAAC,CAAC;gBACrD,KAAI,CAAC,YAAY,GAAG,0EAAW,CAAC,QAAQ,CAAC,OAAO,CAAC;gBACjD,KAAI,CAAC,WAAW,EAAE,CAAC;aAClB;YACD,KAAI,CAAC,WAAW,GAAG,IAAI,CAAC;YACxB,KAAI,CAAC,OAAO,CAAC,OAAO,EAAE,CAAC;QAC1B,CAAC,CAAC,CAAC;IACN,CAAC;IACD,iCAAW,GAAX,UAAY,UAA2B;QAAvC,iBAMC;QANW,+CAA2B;QACrC,IAAI,UAAU,EAAE;YAAE,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,eAAe,CAAC,CAAC;SAAE;QAC1D,iDAAiD;QACjD,UAAU,CAAC;YACT,KAAI,CAAC,YAAY,EAAE,CAAC;QACxB,CAAC,EAAE,GAAG,CAAC,CAAC;IACR,CAAC;IAEC,4BAAM,GAAN,UAAO,GAAW;QAChB,IAAI,CAAC,cAAc,CAAC,GAAG,EAAE,QAAQ,EAAE,oCAAoC,EAAE,KAAK,CAAC,CAAC;IACjF,CAAC;IACD,6BAAO,GAAP,UAAQ,GAAW;QAClB,IAAI,CAAC,cAAc,CAAC,GAAG,EAAE,UAAU,EAAE,sCAAsC,EAAE,OAAO,CAAC,CAAC;IACvF,CAAC;IACF,gCAAU,GAAV,UAAW,GAAQ;QACjB,IAAI,CAAC,OAAO,CAAC,eAAe,CAAC,cAAY,GAAK,CAAC,CAAC;IAClD,CAAC;IACD,iCAAW,GAAX;QACE,QAAQ,IAAI,CAAC,MAAM,EAAE;YACnB,KAAK,GAAG;gBACJ,IAAI,CAAC,UAAU,GAAG,cAAc,CAAC;gBACjC,MAAM;YACV,KAAK,GAAG;gBACJ,IAAI,CAAC,UAAU,GAAG,aAAa,CAAC;gBAChC,MAAM;YACV,KAAK,GAAG;gBACJ,IAAI,CAAC,UAAU,GAAG,cAAc,CAAC;gBACjC,MAAM;YACV;gBACI,IAAI,CAAC,UAAU,GAAG,cAAc,CAAC;gBACjC,MAAM;SACX;IACH,CAAC;IACD,kCAAY,GAAZ;QACE,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC,YAAY,CAAC,cAAc,CAAC,0EAAW,CAAC,QAAQ,CAAC,OAAO,EAAE,IAAI,CAAC,YAAY,CAAC,CAAC;IAC1G,CAAC;IAEK,oCAAc,GAApB,UAAqB,GAAW,EAAE,OAAe,EAAC,QAAgB,EAAE,SAAiB;;;;;;;;wBAErE,qBAAM,IAAI,CAAC,eAAe,CAAC,MAAM,CAAC;gCAC9C,MAAM,EAAE,OAAO;gCACf,OAAO,EAAE,QAAQ;gCACjB,OAAO,EAAE;oCACP;wCACE,IAAI,EAAE,QAAQ;wCACd,IAAI,EAAE,QAAQ;wCACd,OAAO,EAAE;4CACP,OAAO,CAAC,GAAG,CAAC,gBAAgB,CAAC,CAAC;wCAChC,CAAC;qCACF;oCACD;wCACE,IAAI,EAAE,IAAI;wCACV,OAAO,EAAE;4CACP,QAAQ,SAAS,EACjB;gDACE,KAAK,OAAO;oDACR,KAAI,CAAC,OAAO,CAAC,GAAG,CAAC,kBAAkB,CAAC,CAAC,IAAI,CAAC,eAAK;wDAC3C,IAAI,KAAK,IAAI,IAAI,EAAE;4DACnB,KAAK,GAAG,EAAE,CAAC;yDAAE;wDACb,4CAA4C;wDAC5C,IAAM,KAAK,GAAG,KAAK,CAAC,SAAS,CAAC,cAAI,IAAI,WAAI,CAAC,UAAU,KAAK,GAAG,CAAC,IAAI,EAAE,EAA9B,CAA8B,CAAC,CAAC;wDACtE,IAAI,KAAK,IAAI,CAAC,EAAE;4DACd,IAAM,QAAM,GAAQ,KAAK,CAAC,IAAI,CAAC,cAAI,IAAI,WAAI,CAAC,UAAU,KAAK,GAAG,CAAC,IAAI,EAAE,EAA9B,CAA8B,CAAC,CAAC;4DACvE,KAAK,CAAC,MAAM,CAAC,KAAK,EAAE,CAAC,CAAC,CAAC;4DACvB,KAAI,CAAC,OAAO,CAAC,GAAG,CAAC,kBAAkB,EAAE,KAAK,CAAC,CAAC,IAAI,CAAC;gEACjD,IAAM,UAAU,GAAG,IAAI,sEAAW,EAAE,CAAC;gEACrC,UAAU,CAAC,UAAU,GAAG,QAAM,CAAC,cAAc,CAAC,UAAU,CAAC;gEACzD,UAAU,CAAC,OAAO,GAAG,QAAM,CAAC,cAAc,CAAC,WAAW,CAAC;gEACvD,UAAU,CAAC,WAAW,GAAG,QAAM,CAAC,UAAU,CAAC,WAAW,CAAC;gEACvD,UAAU,CAAC,WAAW,GAAG,QAAM,CAAC,UAAU,CAAC,WAAW,CAAC;gEACvD,KAAI,CAAC,YAAY,CAAC,kBAAkB,CAAC,UAAU,EAAE,QAAQ,CAAC,CAAC;4DAC5D,CAAC,CAAC,CAAC;yDACF;oDACJ,CAAC,CAAC,CAAC;oDACL,MAAM;gDACN,KAAK,KAAK;oDACN,KAAI,CAAC,OAAO,CAAC,OAAO,CAAC,aAAa,CAAC,CAAC;oDACpC,KAAI,CAAC,OAAO,CAAC,GAAG,CAAC,kBAAkB,CAAC,CAAC,IAAI,CAAC,eAAK;wDAC3C,IAAI,KAAK,IAAI,IAAI,EAAE;4DACnB,KAAK,GAAG,EAAE,CAAC;yDAAE;wDACb,4CAA4C;wDAC5C,IAAM,KAAK,GAAG,KAAK,CAAC,SAAS,CAAC,cAAI,IAAI,WAAI,CAAC,UAAU,KAAK,GAAG,CAAC,IAAI,EAAE,EAA9B,CAA8B,CAAC,CAAC;wDACtE,IAAI,KAAK,IAAI,CAAC,EAAE;4DACd,KAAK,CAAC,MAAM,CAAC,KAAK,EAAE,CAAC,CAAC,CAAC;4DACvB,KAAI,CAAC,OAAO,CAAC,GAAG,CAAC,kBAAkB,EAAE,KAAK,CAAC,CAAC,IAAI,CAAC;gEAC/C,0BAA0B;gEAC1B,KAAI,CAAC,WAAW,EAAE,CAAC;4DACtB,CAAC,CAAC,CAAC;yDACF;oDACJ,CAAC,CAAC,CAAC;oDACL,MAAM;6CACf;wCACH,CAAC;qCACF;iCACF;6BACD,CAAC;;wBAxDG,UAAQ,SAwDX;wBACD,qBAAM,OAAK,CAAC,OAAO,EAAE;;wBAArB,SAAqB,CAAC;;;;wBAEtB,IAAI,CAAC,YAAY,CAAC,QAAQ,CAAC,IAAI,CAAC,SAAS,CAAC,OAAK,CAAC,EAAC,6BAA6B,CAAC,CAAC;wBAChF,IAAI,CAAC,OAAO,CAAC,YAAY,CAAC,OAAO,EAAE,uBAAuB,CAAC,CAAC;;;;;;KAE/D;IAxIY,WAAW;QALvB,+DAAS,CAAC;YACT,QAAQ,EAAE,aAAa;YACvB,qGAAkC;;SAEnC,CAAC;+EAUkC,6EAAe,EAAoB,8EAAa,EAAyB,8DAAe,EAAmB,4DAAa,EAAoB,sDAAO;OAT1K,WAAW,CAyIvB;IAAD,kBAAC;CAAA;AAzIuB","file":"pages-history-history-module.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { HistoryPage } from './history.page';\nimport { SharedModule } from '../shared/shared.module';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: HistoryPage\n  }\n];\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,SharedModule,\n    RouterModule.forChild(routes)\n  ],\n  declarations: [HistoryPage]\n})\nexport class HistoryPageModule {}\n","module.exports = \"<ion-header>\\n  <ion-toolbar color=\\\"tertiary\\\">\\n    <ion-buttons slot=\\\"start\\\">\\n      <ion-menu-button></ion-menu-button>\\n    </ion-buttons>\\n    <!-- <ion-buttons slot=\\\"end\\\">\\n    <ion-button (click)=\\\"refreshList()\\\">\\n        <ion-icon name=\\\"help-circle\\\"></ion-icon>\\n      </ion-button>\\n    </ion-buttons> -->\\n    <ion-searchbar placeholder=\\\"Search\\\"\\n    [(ngModel)]=\\\"searchTerm\\\"\\n    (ionChange)=\\\"setFilteredItems()\\\"\\n  ></ion-searchbar>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content>\\n\\n  <ion-list>\\n    \\n        <ion-item-divider>\\n          \\n<p>\\n<ion-select [(ngModel)]=\\\"sortBy\\\" (ionChange)=\\\"sortByDates()\\\" interface=\\\"popover\\\" aria-placeholder=\\\"Sort By\\\">\\n    <ion-select-option value=\\\"1\\\">Date Created</ion-select-option>\\n    <ion-select-option value=\\\"2\\\">Expected By</ion-select-option>\\n    <ion-select-option value=\\\"3\\\">Last Updated</ion-select-option>\\n    </ion-select></p>\\n    \\n        <ion-icon  color=\\\"tertiary\\\" style=\\\"cursor: pointer;padding-bottom: 9px;padding-right: 6px\\\" title=\\\"Filter by Date\\\" name=\\\"calendar\\\" (click)=\\\"picker.open()\\\" slot=\\\"end\\\"></ion-icon>\\n        <ion-datetime #picker [(ngModel)]=\\\"dateSelected\\\" min=\\\"2010\\\" max=\\\"2050\\\" (ionChange)=\\\"searchByDate()\\\" display-format=\\\"MM/DD/YYYY\\\"></ion-datetime>\\n        <ion-icon  color=\\\"tertiary\\\" style=\\\"cursor: pointer;padding-bottom: 9px;\\\" title=\\\"refresh\\\" name=\\\"refresh\\\" (click)=\\\"refreshList(true)\\\" slot=\\\"end\\\"></ion-icon>\\n          </ion-item-divider>\\n          <ion-card *ngIf=\\\"archiveItems.length === 0 && readyToLoad\\\">\\n          <ion-card-content  >\\n            <ion-grid><ion-row><ion-col>No Package Available</ion-col></ion-row></ion-grid> \\n        </ion-card-content>\\n      </ion-card>\\n  \\n          <ion-item-sliding *ngFor=\\\"let item of archiveItems\\\">\\n\\n          \\n              <ion-item (click)=\\\"showDetail(item.Key)\\\">\\n    \\n                  <ion-avatar slot=\\\"start\\\">\\n                    <img [src]=\\\"item.ImgUrl\\\">\\n                  </ion-avatar>\\n                  <ion-label>\\n                      <p style=\\\"color:black\\\">Tracking #: <span style=\\\"color: #8810a9 !important;line-height: 25px;\\\">{{item.TrackingNo}}</span></p>\\n                      <p>Status: {{item.Status}}</p>\\n                      <p>{{sortbyDate}}: {{(sortBy === '1'? item.DateCreated:(sortBy === '2'? item.ExpectedDate:(sortBy === '3'? item.LastUpdated:item.DateCreated))) | date:'MM/dd/yyyy'}}</p>\\n                      \\n                    </ion-label>\\n                </ion-item>\\n          \\n              <ion-item-options side=\\\"end\\\">\\n                <ion-item-option color=\\\"tertiary\\\" (click)=\\\"retrack(item.Key)\\\"><ion-icon ios=\\\"ios-repeat\\\" md=\\\"md-repeat\\\"></ion-icon></ion-item-option>\\n                <ion-item-option color=\\\"tertiary\\\" (click)=\\\"delete(item.Key)\\\"><ion-icon title=\\\"Remove\\\"  name=\\\"trash\\\"></ion-icon></ion-item-option>\\n\\n              </ion-item-options>\\n            </ion-item-sliding>\\n \\n</ion-list>\\n<app-help-fab></app-help-fab>\\n</ion-content>\\n<!-- <ion-footer>\\n<app-footertab></app-footertab>\\n</ion-footer> -->\"","module.exports = \"ion-searchbar {\\n  border-radius: 30px !important; }\\n\\nion-list {\\n  padding-top: 2px !important; }\\n\\nion-item-divider {\\n  background: #f2e4ff !important;\\n  height: 35px;\\n  padding-top: 3px !important;\\n  padding-bottom: 3px !important;\\n  padding-left: 4px !important;\\n  padding-right: 3px !important; }\\n\\nion-segment {\\n  background: #f2e4ff; }\\n\\nion-segment-button {\\n  height: 30px !important; }\\n\\nion-segment-button ion-badge {\\n    position: absolute;\\n    top: -0.2rem;\\n    right: -0.2rem;\\n    opacity: 0.9; }\\n\\na {\\n  color: #9906d8 !important; }\\n\\nion-select {\\n  color: #9906d8;\\n  font-weight: bolder;\\n  font-size: 13px; }\\n\\nion-card {\\n  border-block: 2px dotted;\\n  border-block-color: #2d2e2e; }\\n\\nion-card-content {\\n  padding: 0px 0px 0px 0px;\\n  background: #ffe4e4 !important; }\\n\\nion-card-content ion-col {\\n    font-family: Verdana;\\n    font-size: 12px;\\n    color: #8c0606;\\n    padding: 2px; }\\n\\nion-datetime {\\n  display: none !important; }\\n\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvcGFnZXMvaGlzdG9yeS9EOlxcQ29kZVxcaU9TIEFwcFxcVmFpYmhhdlxcQW5kcm9pZFxcQ29kZS9zcmNcXGFwcFxccGFnZXNcXGhpc3RvcnlcXGhpc3RvcnkucGFnZS5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQWMsOEJBQThCLEVBQUE7O0FBQzVDO0VBQVMsMkJBQTJCLEVBQUE7O0FBQ3BDO0VBQWlCLDhCQUE2QjtFQUFDLFlBQVk7RUFBQywyQkFBMkI7RUFBQyw4QkFBOEI7RUFBQyw0QkFBNEI7RUFBQyw2QkFBNkIsRUFBQTs7QUFDakw7RUFBWSxtQkFBbUIsRUFBQTs7QUFDL0I7RUFDSSx1QkFBdUIsRUFBQTs7QUFEM0I7SUFJRSxrQkFBa0I7SUFDbEIsWUFBWTtJQUNaLGNBQWM7SUFDZCxZQUFZLEVBQUE7O0FBR2Q7RUFBRSx5QkFBeUIsRUFBQTs7QUFDM0I7RUFDQyxjQUFjO0VBQ1gsbUJBQW1CO0VBQUMsZUFBZSxFQUFBOztBQUN2QztFQUFTLHdCQUF3QjtFQUFFLDJCQUEwQixFQUFBOztBQUM3RDtFQUFpQix3QkFBd0I7RUFBQyw4QkFBOEIsRUFBQTs7QUFBeEU7SUFDUyxvQkFBb0I7SUFBRSxlQUFlO0lBQUUsY0FBYztJQUFDLFlBQVksRUFBQTs7QUFFM0U7RUFBYSx3QkFBd0IsRUFBQSIsImZpbGUiOiJzcmMvYXBwL3BhZ2VzL2hpc3RvcnkvaGlzdG9yeS5wYWdlLnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyJpb24tc2VhcmNoYmFye2JvcmRlci1yYWRpdXM6IDMwcHggIWltcG9ydGFudDt9XG5pb24tbGlzdHtwYWRkaW5nLXRvcDogMnB4ICFpbXBvcnRhbnQ7fVxuaW9uLWl0ZW0tZGl2aWRlcntiYWNrZ3JvdW5kOiNmMmU0ZmYgIWltcG9ydGFudDtoZWlnaHQ6IDM1cHg7cGFkZGluZy10b3A6IDNweCAhaW1wb3J0YW50O3BhZGRpbmctYm90dG9tOiAzcHggIWltcG9ydGFudDtwYWRkaW5nLWxlZnQ6IDRweCAhaW1wb3J0YW50O3BhZGRpbmctcmlnaHQ6IDNweCAhaW1wb3J0YW50O31cbmlvbi1zZWdtZW50e2JhY2tncm91bmQ6ICNmMmU0ZmY7fVxuaW9uLXNlZ21lbnQtYnV0dG9uIHtcbiAgICBoZWlnaHQ6IDMwcHggIWltcG9ydGFudDtcblxuXHRpb24tYmFkZ2Uge1xuXHRcdHBvc2l0aW9uOiBhYnNvbHV0ZTtcblx0XHR0b3A6IC0wLjJyZW07XG5cdFx0cmlnaHQ6IC0wLjJyZW07XG5cdFx0b3BhY2l0eTogMC45O1xuXHR9XG59XG5he2NvbG9yOiAjOTkwNmQ4ICFpbXBvcnRhbnQ7fVxuaW9uLXNlbGVjdHsgICAgXG5cdGNvbG9yOiAjOTkwNmQ4O1xuICAgIGZvbnQtd2VpZ2h0OiBib2xkZXI7Zm9udC1zaXplOiAxM3B4O31cbmlvbi1jYXJke2JvcmRlci1ibG9jazogMnB4IGRvdHRlZDsgYm9yZGVyLWJsb2NrLWNvbG9yOiMyZDJlMmV9XG5pb24tY2FyZC1jb250ZW50e3BhZGRpbmc6IDBweCAwcHggMHB4IDBweDtiYWNrZ3JvdW5kOiAjZmZlNGU0ICFpbXBvcnRhbnQ7XG4gaW9uLWNvbHtmb250LWZhbWlseTogVmVyZGFuYTsgZm9udC1zaXplOiAxMnB4OyBjb2xvcjogIzhjMDYwNjtwYWRkaW5nOiAycHh9XG59XG5pb24tZGF0ZXRpbWV7ZGlzcGxheTogbm9uZSAhaW1wb3J0YW50O30iXX0= */\"","import { Component, OnInit } from '@angular/core';\nimport { Storage } from '@ionic/storage';\nimport { formatDate } from '@angular/common';\nimport { NavController, LoadingController, AlertController } from '@ionic/angular';\nimport { TrackingService } from 'src/services/tracking.service';\nimport { ActivePackages, SessionData } from 'src/app/models/active-packages';\nimport { LoaderService } from 'src/app/providers/loader.service';\nimport { QueryParams } from 'src/app/models/QueryParams';\n\n@Component({\n  selector: 'app-history',\n  templateUrl: './history.page.html',\n  styleUrls: ['./history.page.scss'],\n})\nexport class HistoryPage implements OnInit {\n  public searchTerm = '';\n  public sortbyDate = 'Date Created';\n  public dateSelected: any = formatDate(new Date(), 'MM/dd/yyyy', 'en');\n  public sortBy = '1';\n  public archiveItems: Array<ActivePackages> = [];\n  readyToLoad = false;\n  loaderToShow: any;\n// tslint:disable-next-line: max-line-length\n  constructor(private trackService: TrackingService , private loading: LoaderService,public alertController: AlertController, private navCtrl: NavController , private storage: Storage) {}\n\n  ngOnInit() {\n  }\n  ionViewWillEnter() {\n    this.loading.present('Loading Records...');\n    this.loadPackages();\n  }\n  setFilteredItems() {\n    if (this.searchTerm === '' || this.searchTerm === undefined || this.searchTerm === null){\n      this.refreshList();\n    } else {\n    this.archiveItems = this.trackService.filterItems(this.archiveItems , this.searchTerm);\n    }\n  }\n  loadPackages() {\n    this.storage.get('_archivePackages').then((value) => {\n      if (value !== '' && value !== undefined && value !== null){\n      this.trackService.setarchivePackagestoSession(value);\n      this.archiveItems = SessionData.packages.Archive;\n      this.sortByDates();\n      }\n      this.readyToLoad = true;\n      this.loading.dismiss();\n   });\n}\nrefreshList(showLoader: boolean = false) {\n  if (showLoader) { this.loading.present('Refreshing...'); }\n  // tslint:disable-next-line: only-arrow-functions\n  setTimeout(()=>{\n    this.loadPackages();\n}, 800);\n}\n\n  delete(key: string) {\n    this.presentConfirm(key, 'Delete', 'Do you want to delete the package?', 'del');\n   }\n   retrack(key: string) {\n    this.presentConfirm(key, 'Re-Track', 'Do you want to Re-Track the package?', 'rtrck');\n   }\n  showDetail(key: any) {\n    this.navCtrl.navigateForward(`/details/${key}`);\n  }\n  sortByDates() {\n    switch (this.sortBy) {\n      case '1':\n          this.sortbyDate = 'Date Created';\n          break;\n      case '2':\n          this.sortbyDate = 'Expected By';\n          break;\n      case '3':\n          this.sortbyDate = 'Last Updated';\n          break;\n      default:\n          this.sortbyDate = 'Date Created';\n          break;\n    }\n  }\n  searchByDate() {\n    this.archiveItems = this.trackService.filterDatewise(SessionData.packages.Archive, this.dateSelected);\n}\n\nasync presentConfirm(key: string ,_header: string,_message: string, _opration: string) {\n  try{ \n    let alert = await this.alertController.create({\n    header: _header,\n    message: _message,\n    buttons: [\n      {\n        text: 'Cancel',\n        role: 'cancel',\n        handler: () => {\n          console.log('Cancel clicked');\n        }\n      },\n      {\n        text: 'Ok',\n        handler: () => {\n          switch (_opration)\n          {\n            case 'rtrck':\n                this.storage.get('_archivePackages').then(tData => {\n                    if (tData == null) {\n                    tData = []; }\n                    // tslint:disable-next-line: max-line-length\n                    const index = tData.findIndex(item => item.trackingNo === key.trim());\n                    if (index >= 0) {\n                      const record: any = tData.find(item => item.trackingNo === key.trim());\n                      tData.splice(index, 1);\n                      this.storage.set('_archivePackages', tData).then(() => {\n                      const queryParam = new QueryParams();\n                      queryParam.TrackingNo = record.Trackingheader.TrackingNo;\n                      queryParam.Carrier = record.Trackingheader.CarrierCode;\n                      queryParam.Description = record.ResultData.Description;\n                      queryParam.Residential = record.ResultData.Residential;\n                      this.trackService.getTrackingDetails(queryParam, 'actpck');\n                     });\n                     }\n                  });\n                break;\n                case 'del':\n                    this.loading.present('Deleting...');\n                    this.storage.get('_archivePackages').then(tData => {\n                        if (tData == null) {\n                        tData = []; }\n                        // tslint:disable-next-line: max-line-length\n                        const index = tData.findIndex(item => item.trackingNo === key.trim());\n                        if (index >= 0) {\n                          tData.splice(index, 1);\n                          this.storage.set('_archivePackages', tData).then(() => {\n                            // this.loading.dismiss();\n                            this.refreshList();\n                         });\n                         }\n                      });\n                    break;\n          }\n        }\n      }\n    ]\n   });\n    await alert.present();\n  } catch (error) {\n    this.trackService.logError(JSON.stringify(error),'presentConfirm-history-page');\n    this.loading.presentToast('Error', 'Something went wrong!');\n}\n}\n}\n"],"sourceRoot":""}